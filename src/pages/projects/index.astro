---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const projects = (await getCollection('projects')).sort(
  (a, b) => b.data.updatedAt.valueOf() - a.data.updatedAt.valueOf()
);
---

<Layout title="Projects | SqualieC" description="Catalog of experiments, games, and software utilities.">
  <section class="hero">
    <p class="eyebrow">Projects</p>
    <h1>Catalog</h1>
    <p class="lead">Every project entry is content-driven and strongly typed from the collection schema.</p>
  </section>

  <section>
    <div class="grid">
      {projects.map((project) => (
        <article class="card">
          <h3>{project.data.title}</h3>
          <p>{project.data.pitch}</p>
          <div class="meta-row">
            {project.data.tags.map((tag) => (
              <span class="badge">{tag}</span>
            ))}
          </div>
          <div class="meta-row">
            <span class="badge">Updated {project.data.updatedAt.toISOString().slice(0, 10)}</span>
            <span class="badge">{project.data.status}</span>
          </div>
          <a class="cta" href={`/projects/${project.slug}`}>View details</a>
        </article>
      ))}
    </div>
  </section>
</Layout>

